<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://netdna.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
        <title>ePharmaSphere</title>
        <link rel="icon" type="image/x-icon" th:href="@{/assets/pharmacie.ico}" />
        
    
        <!-- Custom Google font-->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" />
    
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet" />
        <link href="/static/css/styles.css" rel="stylesheet"/>
	<link href="/static/css/style.css" rel="stylesheet"/>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/styles.css" rel="stylesheet" />
    
        <!-- Your additional stylesheets with Thymeleaf syntax -->
        <link href="/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/css/magnific-popup.css" rel="stylesheet" />
        <link href="/css/jquery-ui.css" rel="stylesheet" />
        <link href="/css/owl.carousel.min.css" rel="stylesheet" />
        <link href="/css/owl.theme.default.min.css" rel="stylesheet" />
        <link href="/css/aos.css" rel="stylesheet" />
        <link href="/css/style.css" rel="stylesheet" />
    
        <!-- Additional fonts -->
        <link href="https://fonts.googleapis.com/css?family=Rubik:400,700|Crimson+Text:400,400i" rel="stylesheet">
        <link rel="stylesheet" href="fonts/icomoon/style.css">
 
<style type="text/css">
        body{
        margin-top:20px;
        /*background:#eee;*/
        background: #fff;
        }
        
        
        .email-app {
            display: flex;
            flex-direction: row;
            background: #fff;
            border: 1px solid #e1e6ef;
        }

        .email-app nav {
            flex: 0 0 200px;
            padding: 1rem;
            border-right: 1px solid #e1e6ef;
        }

        .email-app nav .btn-block {
            margin-bottom: 10px;
        }

        .email-app nav .nav {
            flex-direction: column;
        }

        .email-app nav .nav .nav-item {
            position: relative;
        }

        .email-app nav .nav .nav-item .nav-link,
        .email-app nav .nav .nav-item .navbar .dropdown-toggle,
        .navbar .email-app nav .nav .nav-item .dropdown-toggle {
            color: #151b1e;
            border-bottom: 1px solid #e1e6ef;
        }

        .email-app nav .nav .nav-item .nav-link i,
        .email-app nav .nav .nav-item .navbar .dropdown-toggle i,
        .navbar .email-app nav .nav .nav-item .dropdown-toggle i {
            width: 20px;
            margin: 0 10px 0 0;
            font-size: 14px;
            text-align: center;
        }

        .email-app nav .nav .nav-item .nav-link .badge,
        .email-app nav .nav .nav-item .navbar .dropdown-toggle .badge,
        .navbar .email-app nav .nav .nav-item .dropdown-toggle .badge {
            float: right;
            margin-top: 4px;
            margin-left: 10px;
        }

        .email-app main {
            min-width: 0;
            flex: 1;
            padding: 1rem;
        }

        .email-app .inbox .toolbar {
            padding-bottom: 1rem;
            border-bottom: 1px solid #e1e6ef;
        }

        .email-app .inbox .messages {
            padding: 0;
            list-style: none;
        }

        .email-app .inbox .message {
            position: relative;
            padding: 1rem 1rem 1rem 2rem;
            cursor: pointer;
            border-bottom: 1px solid #e1e6ef;
        }

        .email-app .inbox .message:hover {
            background: #f9f9fa;
        }

        .email-app .inbox .message .actions {
            position: absolute;
            left: 0;
            display: flex;
            flex-direction: column;
        }

        .email-app .inbox .message .actions .action {
            width: 2rem;
            margin-bottom: 0.5rem;
            color: #c0cadd;
            text-align: center;
        }

        .email-app .inbox .message a {
            color: #000;
        }

        .email-app .inbox .message a:hover {
            text-decoration: none;
        }

        .email-app .inbox .message.unread .header,
        .email-app .inbox .message.unread .title {
            font-weight: bold;
        }

        .email-app .inbox .message .header {
            display: flex;
            flex-direction: row;
            margin-bottom: 0.5rem;
        }

        .email-app .inbox .message .header .date {
            margin-left: auto;
        }

        .email-app .inbox .message .title {
            margin-bottom: 0.5rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .email-app .inbox .message .description {
            font-size: 12px;
        }

        .email-app .message .toolbar {
            padding-bottom: 1rem;
            border-bottom: 1px solid #e1e6ef;
        }

        .email-app .message .details .title {
            padding: 1rem 0;
            font-weight: bold;
        }

        .email-app .message .details .header {
            display: flex;
            padding: 1rem 0;
            margin: 1rem 0;
            border-top: 1px solid #e1e6ef;
            border-bottom: 1px solid #e1e6ef;
        }

        .email-app .message .details .header .avatar {
            width: 40px;
            height: 40px;
            margin-right: 1rem;
        }

        .email-app .message .details .header .from {
            font-size: 12px;
            color: #9faecb;
            align-self: center;
        }

        .email-app .message .details .header .from span {
            display: block;
            font-weight: bold;
        }

        .email-app .message .details .header .date {
            margin-left: auto;
        }

        .email-app .message .details .attachments {
            padding: 1rem 0;
            margin-bottom: 1rem;
            border-top: 3px solid #f9f9fa;
            border-bottom: 3px solid #f9f9fa;
        }

        .email-app .message .details .attachments .attachment {
            display: flex;
            margin: 0.5rem 0;
            font-size: 12px;
            align-self: center;
        }

        .email-app .message .details .attachments .attachment .badge {
            margin: 0 0.5rem;
            line-height: inherit;
        }

        .email-app .message .details .attachments .attachment .menu {
            margin-left: auto;
        }

        .email-app .message .details .attachments .attachment .menu a {
            padding: 0 0.5rem;
            font-size: 14px;
            color: #e1e6ef;
        }
        .main-breadcrumb {
            background-color: white;
        }

        @media (max-width: 767px) {
            .email-app {
                flex-direction: column;
            }
            .email-app nav {
                flex: 0 0 100%;
            }
        }

        @media (max-width: 575px) {
            .email-app .message .header {
                flex-flow: row wrap;
            }
            .email-app .message .header .date {
                flex: 0 0 100%;
            }
        }
</style>
</head>
<body>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
        <div class="container px-5 site-navigation text-right text-md-center" role="navigation">
            <a class="navbar-brand" href="index.html"><span class="fw-bolder text-success">ePharmaSphere</span></a> 
            <ol class="navbar-brand"><!--breadcrumb-item-->
                <li class="navbar-brand" ><a class="btn btn-success" th:href="@{/}">logout</a></li>
            </ol>   
        </div>
    </nav>
    
    <header class="py-5">
        <div class="container px-5">
            <div class="row gx-5 align-items-center">
                <div class="col-xxl-5">
                    <!-- Header text content-->
                    <div class="text-center text-xxl-start">
                        <div class="badge bg-gradient-primary-to-secondary text-white mb-4"><div class="text-uppercase">Communication &middot; Satisfaction &middot; Confidentiality</div></div>
                        <div class="fs-3 fw-light text-muted">Time-saving made easy</div>
                        <h1 class="display-3 fw-bolder mb-5"><span class="text-gradient d-inline">Pharmacy Dashboard</span></h1>
                    </div>
                </div>
                
            </div>
        </div>
    </header>

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <div class="container">
            <div class="row gutters-sm justify-content-center">
                <div class="col-md-4 mb-3">
                    <div class="card mx-auto">
                        <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                        <img src="https://img.freepik.com/vecteurs-premium/illustration-vectorielle-symbole-pharmacie-illustration-couleur-verte-signe-pharmacie_764382-1137.jpg?w=360" alt="Admin" class="rounded-circle" width="150">
                        <div class="mt-3">
                        </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="card mb-3">
                    <div class="card-body">
                        <div th:each="info : ${info}">
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">Pharmacy Name</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" th:text="${info.pharmacy_name}"></div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">Email</h6>
                                </div>
                                <div class="col-sm-9 text-secondary">
                                    <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6c0a051c2c061907011904420d00" th:text="${info.email}"></a>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">Phone</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" th:text="${info.phoneNumber}"></div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-sm-3">
                                    <h6 class="mb-0">Address</h6>
                                </div>
                                <div class="col-sm-9 text-secondary" th:text="${info.address}"></div>
                            </div>
                            <hr>
                            
                        </div>

                        <div class="row">
                            <div class="col-sm-12">
                                <a class="btn btn-success" href="http://192.168.1.7:8082/api/pharmadashboard/edit" target="_blank">Edit</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            
            
                


            <div class="email-app mb-4">
                <nav>
                    <button onclick="handleInboxClick()" class="btn btn-success btn-block ">Messages Box</button>
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link inbox-button" href="javascript:void(0);" onclick="handleInboxClick()" ><i class="fa fa-inbox"></i> Inbox</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link stared-button" href="javascript:void(0);"><i class="fa fa-star"></i> Stared</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link rocket-button"  href="javascript:void(0);" ><i class="fa fa-rocket"></i> Sent</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link trash-button" href="javascript:void(0);"><i class="fa fa-trash-o"></i> Trash</a>
                        </li>
                    </ul>
                </nav>
    
                <main class="inbox">
                    <div class="card-body">
                        <div class="tab-content">    
                            <ul class="messages" id="inbox-messages">
                                <li class="message unread" th:each="message : ${messages}">
                                    <a href="#">
                                        <div class="actions">
                                            <span class="action"><i class="fa fa-square-o"></i></span>
                                            <span class="action important" onclick="toggleStar(this)"><i class="fa fa-star-o"></i></span>
                                            <span class="action delete" onclick="deleteMessage(this)"><i class="fa fa-trash"></i></span>
                                            <span class="action download" onclick="downloadFile(this)"><i class="fa fa-download"></i></span>
                                        </div>
                                        <div class="header">
                                            <span class="from">
                                                Sender: <span th:text="${message.sender}"></span>
                                            </span>
                                            <span class="date">
                                                <span class="fa fa-paper-clip"></span>
                                                Timestamp: <span th:text="${message.timestamp}"></span>
                                            </span>
                                        </div>
                                        <div class="title">
                                            Subject: <span th:text="${message.subject}"></span>
                                        </div>
                                        <div class="description">
                                            Content: <span th:text="${message.content}"></span>
                                        </div>
                                        <!--<div class="attachment" th:if="${message.file_path}">
                                             
                                            <div th:with="{message.file_path}"></div>
                                            
                                            <a th:href="@{'/download/' + ${message.id}}" target="_blank">
                                                <i class="fa fa-download"></i> Download File
                                            </a>
                                        </div>-->
                                        <!--<div class="attachment" th:if="${message.filePath}">
                                            
                                            <a th:href="@{'/download/' + ${message.id}}" target="_blank">
                                                <i class="fa fa-download"></i> Download File
                                            </a>
                                        </div>-->
                                        <form action="/displayPdf" method="get">
                                            <button type="submit">View PDF</button>
                                        </form>
                                        
                                        
                                        
                                        
                                    
                                </li>
                                <!-- Additional messages will be dynamically added here -->
                            </ul>

                            <div id="sent-messages" class="sent-messages" style="display: none;">
                                <!-- Sent messages will be displayed here -->
                            </div>
                        </div>
                    </div>

                    <div>
                        <a href="javascript:void(0);" onclick="showComposemessage(this)">
                            <button class="btn btn-success">Compose Message</button>
                        </a>
                    </div>



                    <div id="compose-email" style="display: none;">
                        <!-- Your compose email HTML content goes here -->
                        <p class="text-center">New Message</p>
                        <a class="trash-button" href="javascript:void(0);" onclick="hidecomposeemail(this)"><i class="fa fa-trash-o"></i></a>
                
                        <form th:action="@{/pharmadashboard}" th:object="${message}" method="post">
                            <div class="form-row mb-3">
                                <label for="from" class="col-2 col-sm-1 col-form-label">from:</label>
                                <div class="col-10 col-sm-11">
                                    <input type="text" id="from" name="sender" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-row mb-3">
                                <label for="to" class="col-2 col-sm-1 col-form-label">to:</label>
                                <div class="col-10 col-sm-11">
                                    <input type="text" id="to" name="receiver" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-row mb-3">
                                <label for="object" class="col-2 col-sm-1 col-form-label">object:</label>
                                <div class="col-10 col-sm-11">
                                    <input type="text" id="object" name="subject" class="form-control">
                                </div>
                            </div>
                            <div class="form-row mb-3">
                                <label for="content" class="col-2 col-sm-1 col-form-label">content:</label>
                                <div class="col-10 col-sm-11">
                                    <input type="text" id="content" name="content" class="form-control" required>
                                </div>
                            </div>
                            <div>
                                <button type="submit" class="btn btn-success" onclick="addMessage()">send</button>
                            </div>
                        </form>
                    </div>
                    
                        
                        
                        </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <script type="text/javascript">
            function deleteMessage(element) {
    const messageElement = element.closest('.message');
    messageElement.classList.add('deleted');
    messageElement.style.display = 'none';
}

const deleteIcons = document.querySelectorAll('.message .action.delete');
deleteIcons.forEach(function (deleteIcon) {
    deleteIcon.addEventListener('click', function (event) {
        event.preventDefault();
        deleteMessage(this);
    });
});

document.querySelector('.trash-button').addEventListener('click', function() {
    const deletedMessages = document.querySelectorAll('.message.deleted');
    const undeletedMessages = document.querySelectorAll('.message:not(.deleted)');
    
    undeletedMessages.forEach(function(message) {
        message.style.display = 'none';
    });
    
    deletedMessages.forEach(function(message) {
        message.style.display = 'block';
    });
});


function toggleStar(element) {
    const messageElement = element.closest('.message');
    const starIcon = messageElement.querySelector('.fa-star-o');

    // Toggle the star icon and update the visual state
    if (starIcon) {
        starIcon.classList.remove('fa-star-o');
        starIcon.classList.add('fa-star');
        messageElement.classList.add('stared');
    } else {
        const filledStarIcon = messageElement.querySelector('.fa-star');
        filledStarIcon.classList.remove('fa-star');
        filledStarIcon.classList.add('fa-star-o');
        messageElement.classList.remove('stared');
    }
}


document.querySelector('.stared-button').addEventListener('click', function(){
    const staredMessages = document.querySelectorAll('.message.stared');
    const unstaredMessages = document.querySelectorAll('.message:not(.stared)');
    
    unstaredMessages.forEach(function(message) {
        message.style.display = 'none';
    });
    
    staredMessages.forEach(function(message) {
        message.style.display = 'block';
    });
});


function handleInboxClick() {
    const deletedMessages = document.querySelectorAll('.message.deleted');
    const undeletedMessages = document.querySelectorAll('.message:not(.deleted)');
    
    undeletedMessages.forEach(function(message) {
        message.style.display = 'block';
    });
    
    deletedMessages.forEach(function(message) {
        message.style.display = 'none';
    });

    const staredMessages = document.querySelectorAll('.message.stared');
    staredMessages.forEach(function(message) {
        message.style.display = 'block';
    });
}



const messages = document.querySelectorAll('.message');

messages.forEach(function (message) {
    message.addEventListener('click', function (event) {
        //event.preventDefault(); // Prevent the default behavior of the anchor element
        
    });
});


function showComposemessage(){
    const composeEmailSection = document.getElementById('compose-email');
    composeEmailSection.style.display = 'block';
}

// Function to hide the compose email section
function hidecomposeemail() {
    const composeEmailSection = document.getElementById('compose-email');
    composeEmailSection.style.display = 'none';
}

// Add a click event listener to the trash button in the compose email section
document.querySelector('.trash-button').addEventListener('click', hideComposeEmail);


messages.forEach(function (message) {
    const downloadButton = message.querySelector('.download');

    if (downloadButton) {
        downloadButton.addEventListener('click', function (event) {
            event.preventDefault();

            // Retrieve the file path from the corresponding message element
            const filePath = message.querySelector('.attachment a').getAttribute('href');

            // Create a temporary link element
            const link = document.createElement('a');
            link.href = filePath;
            link.download = '';  // The file will be downloaded with its original name
            document.body.appendChild(link);

            // Trigger the click event on the link to initiate the download
            link.click();

            // Remove the link from the DOM
            document.body.removeChild(link);
        });
    }
});








function openPDFInNewWindow() {
// Specify the URL of the PDF file
var pdfURL = "file_url_here"; // Replace with your PDF file URL

// Open a new browser window with the PDF file
var newWindow = window.open(pdfURL, "_blank", "width=800, height=600");

// Focus on the new window (optional)
if (newWindow) {
    newWindow.focus();
}
}



function addMessage() {
            // This function can be used to perform any additional client-side logic
            // before submitting the form. For example, displaying a confirmation message.
        }   
        </script>
        
</body>
</html>        
